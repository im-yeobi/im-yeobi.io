---
title: "[Spring Runner] Spring Runner 워크숍 리뷰 (Day 1)"
date: "2019-08-26T23:15"
description: "Spring Runner 워크숍 리뷰 (Day 1)"

---

지난 주말(8/24, 25)에 Spring Framework 교육을 듣고 왔다. [Spring Runner](https://springrunner.io/) 주관의 교육으로, 우연한 기회에 페이스북에서 정보를 얻어 신청하였다. 적은 금액은 아니었지만 'Spring을 어떻게 해야 잘 쓸 수 있을까'라는 고민을 계속 하던 상황이었기 때문에 뭐가 됐든 일단 가보고 싶었다. 그리고 강사님이 스프링캠프 활동도 하셨던 분이기에 더 흥미가 생겼다.

교육은 하루 8시간씩 이틀간 총 16시간 동안 진행되었고, 주말이 없어지는 것이 속상했지만 몰랐던 것을 배울 수 있다는 생각에 기대가 되었다. 

```
Spring Runner 워크숍은 Spring MVC와 Spring Boot로 서버사이드 애플리케이션을 직접 개발하며 학습하는 워크숍입니다.
- festa에 올라온 개요 - 
```

정의된 API 명세서를 바탕으로 요구사항에 맞게 RESTful API를 개발하고, 미리 구현된 클라이언트 사이드와 적절한 응답과 요청을 주고받는 작은 서비스(`Todo Application`)를 만드는 것을 2일 동안 진행하였다.



## 첫 날

오전부터 빠듯하게 수업이 진행되었다. 지헌님이 웹 전반에 대한 이론 위주의 설명을 오전 내내 해주었다. 깊은 내용은 아니었고, 웹 상에서 HTTP 요청을 통해 애플리케이션이 동작하는 과정을 한번 훑고 지나가는 느낌이었다.

진짜 Spring 교육은 오후부터였다. 이번 프로젝트에 반영할 [`클린 아키텍처에`](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html) 대해 설명으로 용권님의 강의가 시작되었다.

![the-clean-architecture](./images/the-clean-architecture.jpg)

클린 아키텍처에 대해서는 좀 더 공부가 필요할 것 같다. '외부에서 내부를 볼 수는 있지만, 내부에서 외부 참조는 허용하지 않는다'는 알고 있지만 그 외에 circle 간의 구분은 자세히 모르겠다..

이후에는 프로젝트 셋팅 작업을 했다. 워크숍 이전에 공지된 내용에 따라서 설정(STS, JDK 8 설치, UTF-8 설정)을 해둔 상태라 크게 할 건 없었다. 프로젝트를 생성하고 용권님이 구현해두신 템플릿을 내 프로젝트에 참조하는 것으로 환경설정을 마무리 하였다.

할 일 프로젝트의 패키지 구조가 회사에서 사용하는 구조와 비슷하지만 조금은 달랐다. 지금 내가 사용하고 있는 패키지 구조는 `도메인 기반의 패키지 구조`인데, 워크숍에서 진행했던 프로젝트는 큰 틀에서는 도메인 기반의 패지키 구조에서 공용, 코어 모듈, 보안 모듈 등을 분리해놓은 구조였다.

워크숍에서는 스프링으로 서버사이드 애플리케이션만을 구현하는 것이었고, 클라이언트 사이드는 이미 구현된 템플릿이 제공되었다. 용권님이 vue.js로 이미 만들어둔 템플릿이었다.



### 인증 / 인가

> 인증 
>
> - A라는 건물에 id 카드를 찍고 들어간다.
> - 로그인
>
> 인가
>
> - A라는 건물에 들어갓지만, 모든 방에 들어갈 수는 없다. (권한)
> - 로그인은 하였지만 모든 API를 사용할 수는 없다.



### 아키텍처

> - 그 시스템이 처한 환경 내에서 발생하는 시스템의 속성 또는 기본 개념을 모아 놓은 집합으로 `요소(모듈, 컴포넌트, 클래스)`, 관계, 설계와 진화의 원칙에 녹아들어 있다.
> - `시스템의 구성 요소를 어떤 원칙하에 분리하고, 구성 요소 간의 상호작용 방법에 대한 것.`
>
> **아키텍처 패턴**
>
> - 소포트웨어의 전체적인 구조를 결정하기 위해 사용할 수 있는 패턴.
> - MSA(Micro Service Architecture), MVCA(Model View Controller Architecture)
> - 구성 요소 사이의 관계를 조직화하는 규칙과 가이드라인 포함.
> - 프로그래밍 언어나 프로그래밍 패러다임에 독립적.



### 포트 및 어댑터 아키텍처 (prorts and adapters architecture, a.k.a. hexagonal architecture)

> - 애플리케이션을 외부 기술적인 부분들과 분리시키는 것.
> - 포트와 어댑터로 구현된 추상 계층을 이용해 분리.
> - 애플리케이션을 중심으로 데이터가 들어오고 나가는 구조.



### 클린 아키텍처

> - Robert.c.Martin
> - 내부는 고수준의 추상화 정책, 외부는 저수준의 구체적인 세부사항으로 구성.
> - 관심사를 분리하고 의존성 규칙 준수를 통ㅇ해 테스트하기 쉬운 시스템을 얻기 위함.



###  확장성 있는 웹 애플리케이션 아키텍처

> 더 많은 부하를 처리할 수 있도록 처리량을 증가
>
> - 스케일 아웃
> - 스케일 업



### 로깅 처리

> ```
> logging.level:
>   org.springframework: DEBUG  
>   # 로깅의 수준 변경 => 스프링프레임워크의 로깅을 Debuging으로 변
>   # SLF4J => 로깅 남기기 위한 인터페이스 제공 => logback, log4j
>   # https://www.slf4j.org/   
> ```



### 실습 1. 정적 자원 제공 (Resource)

> 특정 url로 들어온 요청에 대해 resources/static 하위에 저장되어 있는 정작 파일을 제공해주는 것.
>
> - application root로부터 읽어옴
> - file path (임의의 폴더)
>   - file: 
>   - prefix가 추가됨 => 마치 uri와 비슷하다. `http:` `ftp:` `file:`
> - class path
>   - classpath:
> - Spring Boot는 기본적으로 resource/static 에서 정적 자원을 핸들링한다.
> - `스프링 mvc => 로컬에서 동작시에만 webapp 디렉토리에서 리소스 처리 가능. But, Spring Boot를 사용할 때에는 로컬에서만 webapp 사용. 서버에서는 webapp 사실상 사용되지 않는다.`



### 실습 2. 할 일 CRUD

> 정의된 API 명세서대로 할 일(todo)에 대한 등록, 조회, 수정, 삭제 기능을 하는 웹 API를 만드는 실습을 하였다. GET, POST, PUT, DELETE Method를 이용하여 RESTful 한 웹 API를 만들어보았다.
>
> 용권님은 구현 중간중간에 servlet과 spring에서 제공하는 http request에 대한 설명도 해주셨다. 또한 request parameter, body를 처리하는 여러 방법들을 직접 구현해서 보여주셨다. 이 부분이 개인적으로 많은 도움이 되었다. DTO로 사용하던 것이 `커맨드 객체`라 불리는 것도 이때 처음 알았다.  
>
> request에 대한 유효성 처리 역시 프로젝트 구현 과정에 포함되었다. 나는 이때 Create, Update 시에 동일한 커맨드 객체를 사용하는 데, 프로퍼티에 대한 각기 다른 유효성을 적용해야 하는 경우 어떻게 해야 하는지 명확한 해답을 얻었다.
>
> - 규칙 적용 (유효성())
>   - 공백 제거, 최소 4자 이상
>   - domain setter에서 예외 처리
>   - API 수준에서 입력값을 검증할 수 있지 않을까 ? => Validation
>   - Spring default Validator => hibernate Validation 사용한다.
> - `jackson`



### 실습 3. 할 일 목록 파일 다운로드 

> `컨텐트 협상(Content negotiation)` 매커니즘에 대해 배웠다. 동일한 url, 컨텐츠 타입에 따라 어떻게 내부적으로 제어 가능한지 과정을 본 것만으로 큰 도움이 되었다.
>
> - AbstractView
> - ViewResolver 역할
>   - 논리적인 View name을 물리적인 View name으로 변환해준다.
>   - ViewResolver는 Content-Type으로 View를 선택한다. default View를 가지고 있기도 한다.



### 실습 4. 오류 처리

> response에 정확한 내용을 담아 클라이언트에게 전달하는 것은 굉장히 중요하다고 생각한다.  스프링 부트에서 제공하는 기본 에러 페이지 호출 구조.
>
> - Spring Boot가 가진 기본 에러 페이지 => white label error page
> - BasicErrorController
> - @ControllerAdvice
>   - 전역으로 Controller를 제어함으로써 예외처리까지 가능하다.



강의 시간이 정말 순식간에 흘러갔다. 용권님이 점심을 먹을 때, 강의 할 때 지나칠 정도로 말을 많이 한다고 하셨는데 그렇게 말씀하신 이유가 어느 정도 이해가 갔다. 더 많은 것을 받아들이고 싶었는데 그러지 못한 부분이 개인적으로 아쉬웠다.

