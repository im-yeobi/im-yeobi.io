---
title: "[마이크로서비스 따라하기 꿀밋업 시리즈 3탄] Spring Boot를 사용한 마이크로서비스 개발과 페어 프로그래밍 데모"
date: "2019-09-30T20:17"
template: "post"
draft: false
slug: "/posts/seminar/01-pivotal-microservice-development-and-pair-programming/"
category: "세미나"
tags:
  - "Spring Boot"
  - "Pivotal"
  - "Pair programming"
description: "Pivotal Spring Boot 밋업 시리즈 3탄. Spring Boot를 사용한 마이크로서비스 개발(로컬 환경) & 페어 프로그래밍 데모 (테스트 작성)."
socialImage: "/media/01-seminar-pivotal-1.png"
---

![Pivotal Spring Boot 밋업 시리즈 3탄](/media/01-seminar-pivotal-1.png)


## 페어 프로그래밍 데모 (테스트 작성)

- 2인 1조가 되어 페어 프로그래밍을 한다.

  - 네비게이터 (안내자)
  - 드라이버 (네비게이터의 안내에 맞춰 코딩한다.)
- 처음에는 나의 코드를 옆에서 보다는 게 부담스럽지만, 계속해서 하다보면 익숙해지고, 효율이 증대된다.
- 장점 
  - i. 클린 코드에 대한 압박. 코딩 컨벤션을 지키게 된다.
  - ii. 버스 카운트(실리콘밸리의 블랙 조크. 출근하다가 몇 몇 팀원이 버스에 치여 죽는다면, 그 프로젝트는 어떻게 되는가? 몇 명까지 죽어도 그 프로젝트는 원래대로 진행이 가능한가?)
  - iii. 구현이 어떻게 되었는지 팀원 간에 실시간으로 계속 공유 가능하다.
    - 언제든 프로덕션에 배포될 수 있게 하는 것. 커버리지가 좋아야 한다.



### Q. 실제 업무를 하다보면 복잡한 설계와, 복잡한 프로덕션 코드가 발생한다. 이런 부분을 어떤식으로 보완하는가?

- 거대한 애플리케이션에서도 이런 방법(페어 프로그래밍)이 통하는가?
- ER(Enttity Relationship)의 거대함에 대한 걱정이 선행되어야 한다. ER에 대한 스키마를 작성해두고 엔티티화 시킨다.
  - 마이크로서비스를 위해 `복잡한` 스키마를 먼저 생각하지는 않는다.
  - 복잡한 것들과의 매칭은 바로바로 일어나지 않는다. 실제 DB 스키마의 조인을 어떻게 엔티티화 시키는가?
- 선행 작업
  - 굳이 DB에 들어가지 않아도 되는 데이터, 캐싱 데이터, 메모리 데이터, 몽고 DB 데이터 등 선행으로 고려해야 할 것들이 있다.
  - `우선적으로 고려해야 할 사항들을 해결한 후에 페어 프로그래밍을 적용해보라`.



### Q, 스프링에서 제공하는 테스트가 매우 다양하다. Pivotal에서 유닛테스트를 사용하는 구조가 따로 있는가?

- Pivotal에서는 오픈소스를 굉장히 많이 하는데, 오픈 소스의 테스트 코드를 보면 좋을 것이다.



### Q. Spring Boot 내부 아키텍팅 작업, 패키징 작업은 언제 진행되는가? 테스트 코드를 작성할 때 REST API쪽 코드를 작성하였는데, Service쪽도 테스트 코드를 작성해야 하지 않는가?

- 테스트 코드 작성 방법
  - 바텀 업 방법 (Entity 부터 => Repository => Service => Controller)
    - 인티그레이션 방법
  - 엔드유저가 사용하는 것은 프로젝트 생성부터 API 호출
    - Controller, Service, Repository `모두 테스트 코드를 작성`하는 것을 권장한다.
- 아키텍팅은 어떻게 이루어지는가?
  - i. `스코핑` — 어떤 애플리케이션을 어떤 도구를 써서 언제까지 만들 것인가. 왜 만들것인지에 대한 이유, 누가 스폰서인지, 전체적인 그림을 나열한다. 스코핑 단계에서 이 모든 것을 해결한다. (인력 자원 모두 참여)
  - ii. 엔드 유저와 인터뷰. 이걸 진짜로 만들어야 하는지, 만들면 어떻게 만들어야 하는지 계속 피드백을 받는다.
  - iii. 이벤트 스토밍
  - iv. 솔루션을 찾아서 Frame을 만든다. 어떤 도구를 사용해서 만들어야 하는가.
  - v. 백로그 작성. 백엔드 엔지니어의 역할을 어떻게 구분해야 하는지, 구현은 가능한지.



### 정리

- 변화하는 환경에 적응하도록 코드를 작성해야 한다.
- 즉, 미래에 `변경이 쉽도록` 코드를 작성해야 한다.
- 한 줄의 추가 코드는 한 줄의 추가 메인터넌스(maintenance)이다. (한 줄이 추가되면, 유지 보수 한 줄)
- 11/19 (화) 밋업 미리보기
  - Spring Cloud Gateway 리드
  - 조슈롱, 스펜서리 연사롤 모시고자 함
- 배포되지 않은 코드의 가치는 `0` 이다. 코드를 작성하면 빠르게 배포되어야 한다. `테스트 코드를 통해 검증이 되어있다면 빠르게 배포가 가능하다`.
- 변수명, 클래스명 할당에 대해서 강요를 많이 받는다. 왜 이렇게 작성하였는가를 이해해야 한다.
- 테스트 코드란 `실행 가능한 코드에 대한 설명이다`. 
  - 근 미래 / 먼 미래에 우리의 애플리케이션을 쉽게 변경할 수 있도록 하기 위해 테스트 코드를 만든다.
  - 한 줄의 테스트 코드는 한 줄의 maintenance이다. 유닛 테스트는 최대한 간결하게 작성해야 한다. 유닛 테스트가 통합 테스트로 가지는 않지만, 코드 한 줄의 설명을 넣을 수 있다.
- `테스트 커버리지`
  - 현재 Pivotal에서는 100% 페어 프로그래밍을 하고 있다. 배포 상태에서의 코드에 대한 검증 목적으로 테스트를 작성한다.
  - `버그 개선보다는 feature에 더 많은 시간을 투자할 수 있다`.



---



### Reference

- [발표 자료](https://www.slideshare.net/PivotalKorea/20190930-meetupspring-bootxp)
